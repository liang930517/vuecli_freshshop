"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[858],{8858:function(t,s,i){i.r(s),i.d(s,{default:function(){return l}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"products Project_product"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}],staticClass:"modal",attrs:{id:"myModal"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"justify-content-center"},[s("p",{staticStyle:{"margin-bottom":"0"}},[s("span",{staticClass:"icon-modal",domProps:{innerHTML:t._s(t.text)}}),s("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.msg))])])])])]),s("div",{staticClass:"container"},[t._m(0),s("h5",{staticClass:"mb-4"},[t._v("共找到 "+t._s(this.filterProducts.length)+" 項「 "+t._s(this.keyword)+" 」相關的產品")]),s("div",{staticClass:"row"},t._l(t.filterProducts,(function(i){return s("div",{key:i.id,staticClass:"col-lg-3 col-md-6 mb-5"},[s("router-link",{staticClass:"text-decoration-none text-dark",attrs:{to:`/product/${i.id}`}},[s("div",{staticClass:"card"},[s("div",{staticClass:"product__wrap"},[s("div",{staticClass:"product__wrap__img bg-cover position-relative",staticStyle:{height:"200px","background-position":"center","background-size":"cover"},style:{backgroundImage:`url(${i.imageUrl[0]})`}},[s("span",{staticClass:"badge badge-secondary align-self-start favorite",staticStyle:{"border-radius":"0 !important"}},[t._v(" "+t._s(i.category)+" ")])])]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("h5",{staticClass:"card-title text-dark font-weight-bold"},[t._v(" "+t._s(i.title)+" ")])]),s("div",{staticClass:"float-left"},[s("span",{staticClass:"mb-0 h4 font-weight-bold text-danger"},[t._v(" $")]),s("span",{staticClass:"mb-0 h4 font-weight-bold text-danger mr-1"},[t._v(t._s(i.price))])]),s("div",{staticClass:"float-right"},[s("span",{on:{click:function(s){return s.preventDefault(),t.addfavorite(i)}}},[s("i",{staticClass:"fa-sharp fa-solid fa-heart"})]),s("span",{on:{click:function(s){return s.preventDefault(),t.addToCart(i.id)}}},[s("i",{staticClass:"fas fa-cart-plus mr-1"})])])])])])],1)})),0)])])},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"d-sm-flex justify-content-sm-end mb-3"},[s("div",{staticClass:"form-group mb-0"})])}],o={name:"mySearch",data(){return{msg:"",text:"",modal:!1,products:[],favoriteList:[],favoriteId:[],value:!0}},created(){this.getProducts()},props:["keyword"],methods:{getProducts(){const t="https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/ec/products?page=1";this.$http.get(t).then((t=>{this.products=t.data.data}))},addToCart(t,s=1){console.log(t,".......",s);const i="https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/ec/shopping",a={product:t,quantity:s};this.$http.post(i,a).then((()=>{this.$emit("updateCart"),this.text='<i class="fa-solid fa-circle-check" style="color: green;"></i>',this.msg="商品已加入購物車！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3)})).catch((()=>{this.text='<i class="fa-solid fa-triangle-exclamation" style="color: red;"></i>',this.msg="購物車已存在該商品！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3)}))},addfavorite(t){console.log("haha"),this.favoriteList.push(t),this.favoriteId.push(t.id),this.favoriteList=[...new Set(this.favoriteList)],this.favoriteId=[...new Set(this.favoriteId)],localStorage.setItem("favoriteList",JSON.stringify(this.favoriteList)),localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId)),alert("已加入收藏清單")},removefavorite(t){console.log("99999999"),this.favoriteList.forEach(((s,i)=>{s.id===t.id&&(this.favoriteList.splice(i,1),localStorage.removeItem("favoriteList",JSON.stringify(this.favoriteList)))})),this.favoriteId.forEach(((s,i)=>{s===t.id&&(this.favoriteId.splice(i,1),localStorage.removeItem("favoriteId",JSON.stringify(this.favoriteId)))})),alert("已取消收藏清單")}},computed:{filterProducts(){return this.products.filter((t=>t.title.match(this.keyword)||t.category.match(this.keyword)))}}},r=o,c=i(1001),d=(0,c.Z)(r,a,e,!1,null,"2fedca05",null),l=d.exports}}]);
//# sourceMappingURL=858.635409e2.js.map