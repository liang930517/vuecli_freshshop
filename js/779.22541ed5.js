"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[779],{7883:function(t,a,e){e.d(a,{Z:function(){return n}});var s=function(){var t=this,a=t._self._c;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{active:t.pages.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v(" "+t._s(e)+" ")])])})),a("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},i=[],r={props:{pages:{type:Object}},methods:{changePage(t){this.$emit("update",t)}}},o=r,c=e(1001),l=(0,c.Z)(o,s,i,!1,null,null,null),n=l.exports},3779:function(t,a,e){e.r(a),e.d(a,{default:function(){return d}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"products Project_product"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],attrs:{id:"loadingDiv"}},[a("div",{staticClass:"loader"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}],staticClass:"modal",attrs:{id:"myModal"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"justify-content-center"},[a("p",{staticStyle:{"margin-bottom":"0"}},[a("span",{staticClass:"icon-modal",domProps:{innerHTML:t._s(t.text)}}),a("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.msg))])])])])]),t.products[0]?a("div",{staticClass:"container pb-5"},[a("div",{staticClass:"d-sm-flex justify-content-sm-end mb-3"},[a("div",{staticClass:"d-lg-flex align-items-lg-center d-none mr-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],staticClass:"form-control",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.sort=a.target.multiple?e:e[0]},function(a){return t.SelectSort()}]}},[a("option",{attrs:{value:"",disabled:""}},[t._v("商品排序")]),a("option",{attrs:{value:"low_high"}},[t._v("價格由低至高")]),a("option",{attrs:{value:"high_low"}},[t._v("價格由高至低")])])])]),a("div",{staticClass:"row"},t._l(t.filterProducts,(function(e){return a("div",{key:e.id,staticClass:"col-lg-3 col-md-4 mb-5 col-sm-6",attrs:{id:"products"}},[a("router-link",{staticClass:"text-decoration-none text-dark",attrs:{to:`/product/${e.id}`}},[a("div",{staticClass:"card"},[a("div",{staticClass:"product__wrap"},[a("div",{staticClass:"product__wrap__img bg-cover position-relative",staticStyle:{height:"200px","background-position":"center","background-size":"cover"},style:{backgroundImage:`url(${e.imageUrl[0]})`}},[a("span",{staticClass:"badge badge-secondary align-self-start favorite",staticStyle:{"border-radius":"0 !important"}},[t._v(" "+t._s(e.category)+" ")])])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("h5",{staticClass:"card-title text-dark font-weight-bold"},[t._v(" "+t._s(e.title)+" ")])]),a("div",{staticClass:"float-left"},[a("span",{staticClass:"mb-0 h4 font-weight-bold text-danger"},[t._v(" $")]),a("span",{staticClass:"mb-0 h4 font-weight-bold text-danger mr-1"},[t._v(t._s(e.price))])]),a("div",{staticClass:"float-right"},[a("span",{on:{click:function(a){return a.preventDefault(),t.addfavorite(e)}}},[a("i",{staticClass:"fa-sharp fa-solid fa-heart"})]),a("span",{on:{click:function(a){return a.preventDefault(),t.addToCart(e.id)}}},[a("i",{staticClass:"fas fa-cart-plus mr-1"})])])])])])],1)})),0),t.products[0]?a("pagination",{attrs:{pages:t.pagination},on:{update:t.getProducts}}):t._e()],1):t._e()])},i=[],r=e(7883),o={name:"MyProducts",data(){return{msg:"",text:"",modal:!1,products:[],value:!0,favoriteList:[],favoriteId:[],sort:"",pagination:{}}},created(){this.$emit("changeCategory",this.$route.params.category),this.getProducts()},props:["category"],components:{pagination:r.Z},methods:{getProducts(t){const a=`https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/ec/products?page=${t}`;this.$http.get(a).then((t=>{this.products=t.data.data,this.pagination=t.data.meta.pagination,this.value=!1}))},addToCart(t,a=1){const e="https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/ec/shopping",s={product:t,quantity:a};this.$http.post(e,s).then((()=>{this.$emit("updateCart"),this.text='<i class="fa-solid fa-circle-check" style="color: green;"></i>',this.msg="商品已加入購物車！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3)})).catch((()=>{this.text='<i class="fa-solid fa-triangle-exclamation" style="color: red;"></i>',this.msg="購物車已存在該商品！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3)}))},addfavorite(t){this.favoriteList.push(t),this.favoriteId.push(t.id),this.favoriteList=[...new Set(this.favoriteList)],this.favoriteId=[...new Set(this.favoriteId)],localStorage.setItem("favoriteList",JSON.stringify(this.favoriteList)),localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId)),this.text='<i class="fa-solid fa-circle-check" style="color: green;"></i>',this.msg="商品已加入收藏清單！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3)},SelectSort(){this.filterProducts.sort(((t,a)=>"low_high"===this.sort?t.price-a.price:"high_low"===this.sort?a.price-t.price:this.filterProducts))}},computed:{filterProducts(){return"所有商品"===this.category?this.products:this.products.filter((t=>t.category===this.category))}}},c=o,l=e(1001),n=(0,l.Z)(c,s,i,!1,null,null,null),d=n.exports}}]);
//# sourceMappingURL=779.22541ed5.js.map