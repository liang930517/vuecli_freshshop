"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[887],{7883:function(t,e,r){r.d(e,{Z:function(){return l}});var o=function(){var t=this,e=t._self._c;return e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pages.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(r,o){return e("li",{key:o,staticClass:"page-item",class:{active:t.pages.current_page===r}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(r)}}},[t._v(" "+t._s(r)+" ")])])})),e("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pages.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},s=[],a={props:{pages:{type:Object}},methods:{changePage(t){this.$emit("update",t)}}},i=a,c=r(1001),n=(0,c.Z)(i,o,s,!1,null,null,null),l=n.exports},2887:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.modal,expression:"modal"}],staticClass:"BACK-modal",attrs:{id:"myModal"}},[e("div",{staticClass:"ModalContent"},[e("div",{staticClass:"justify-content-center"},[e("div",{staticStyle:{"margin-bottom":"0"}},[e("span",{staticClass:"icon-modal",domProps:{innerHTML:t._s(t.text)}}),e("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(t.msg))])])])])]),e("div",{staticClass:"mt-3 text-right"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-product",modifiers:{"add-product":!0}}],staticClass:"btn btn-success btn-md mr-2",staticStyle:{cursor:"pointer"}},[t._v("建立新的商品")])],1),e("table",{staticClass:"table table-striped mt-3"},[t._m(0),e("tbody",t._l(t.products,(function(r,o){return e("tr",{key:r.id},[e("th",{attrs:{scope:"row"}},[t._v(t._s(o+1))]),e("th",{attrs:{scope:"row"}},[t._v(t._s(r.category))]),e("td",[t._v(t._s(r.title))]),e("td",[e("img",{staticStyle:{width:"100px",height:"100px","object-fit":"cover"},attrs:{src:r.imageUrl,alt:""}})]),e("td",{staticClass:"text-center"},[t._v(t._s(r.origin_price))]),e("td",{staticClass:"text-center"},[t._v(t._s(r.price))]),(r.enabled=!0)?e("td",{staticClass:"text-success text-center font-weight-bold"},[t._v(" 啟用 ")]):e("td",{staticClass:"text-secondary text-center"},[t._v("不啟用")]),e("td",{staticClass:"text-center"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticClass:"btn btn-outline-success btn-sm mr-2",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.getProductTemp(r)}}},[e("i",{staticClass:"fas fa-edit"})]),e("button",{staticClass:"btn btn-outline-danger btn-sm",staticStyle:{cursor:"pointer"},attrs:{type:"button"},on:{click:function(e){return t.delProduct(r)}}},[e("i",{staticClass:"fas fa-trash-alt"})])],1)])})),0)]),e("b-modal",{attrs:{id:"modal-center",centered:"",title:"商品內容","hide-footer":""}},[e("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"title"}},[t._v("名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.title,expression:"productTemp.title"}],staticClass:"form-control",attrs:{type:"text",id:"title"},domProps:{value:t.productTemp.title},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"title",e.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"category"}},[t._v("分類")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.category,expression:"productTemp.category"}],staticClass:"form-control",attrs:{type:"text",id:"category"},domProps:{value:t.productTemp.category},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"category",e.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("敘述")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.content,expression:"productTemp.content"}],staticClass:"form-control",attrs:{type:"text",id:"content"},domProps:{value:t.productTemp.content},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"content",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("說明")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.description,expression:"productTemp.description"}],staticClass:"form-control",attrs:{type:"text",id:"description"},domProps:{value:t.productTemp.description},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"description",e.target.value)}}})]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-4"},[e("label",{attrs:{for:"origin_price"}},[t._v("原價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.origin_price,expression:"productTemp.origin_price"}],staticClass:"form-control",attrs:{type:"text",id:"origin_price"},domProps:{value:t.productTemp.origin_price},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"origin_price",e.target.value)}}})]),e("div",{staticClass:"form-group col-md-4"},[e("label",{attrs:{for:"price"}},[t._v("售價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.price,expression:"productTemp.price"}],staticClass:"form-control",attrs:{type:"text",id:"price"},domProps:{value:t.productTemp.price},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"price",e.target.value)}}})]),e("div",{staticClass:"form-group col-md-4"},[e("label",{attrs:{for:"unit"}},[t._v("單位")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.unit,expression:"productTemp.unit"}],staticClass:"form-control",attrs:{type:"text",id:"unit"},domProps:{value:t.productTemp.unit},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"unit",e.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("label",[t._v("輸入圖片網址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.imageUrl[0],expression:"productTemp.imageUrl[0]"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入圖片連結"},domProps:{value:t.productTemp.imageUrl[0]},on:{input:function(e){e.target.composing||t.$set(t.productTemp.imageUrl,0,e.target.value)}}})]),e("img",{staticClass:"img-fluid",attrs:{src:t.productTemp.imageUrl[0],alt:""}}),e("div",{staticClass:"form-group form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.enabled,expression:"productTemp.enabled"}],attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(t.productTemp.enabled)?t._i(t.productTemp.enabled,null)>-1:t.productTemp.enabled},on:{change:function(e){var r=t.productTemp.enabled,o=e.target,s=!!o.checked;if(Array.isArray(r)){var a=null,i=t._i(r,a);o.checked?i<0&&t.$set(t.productTemp,"enabled",r.concat([a])):i>-1&&t.$set(t.productTemp,"enabled",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.productTemp,"enabled",s)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[t._v("是否啟用")])]),e("hr"),e("button",{staticClass:"btn btn-block btn-danger",attrs:{type:"submit"}},[t._v("儲存變更")])])]),e("b-modal",{attrs:{id:"add-product",centered:"",title:"商品內容","hide-footer":""}},[e("el-form",{ref:"productAdd",staticClass:"form-test mb-5",attrs:{model:t.productAdd,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.submitForm("productAdd")}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("el-form-item",{attrs:{label:"名稱",prop:"title"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.title,callback:function(e){t.$set(t.productAdd,"title",e)},expression:"productAdd.title"}})],1)],1),e("div",{staticClass:"form-group col-md-6"},[e("el-form-item",{attrs:{label:"分類",prop:"category"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.category,callback:function(e){t.$set(t.productAdd,"category",e)},expression:"productAdd.category"}})],1)],1)]),e("div",{staticClass:"form-group"},[e("el-form-item",{attrs:{label:"敘述",prop:"content"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.content,callback:function(e){t.$set(t.productAdd,"content",e)},expression:"productAdd.content"}})],1)],1),e("div",{staticClass:"form-group"},[e("el-form-item",{attrs:{label:"說明",prop:"description"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.description,callback:function(e){t.$set(t.productAdd,"description",e)},expression:"productAdd.description"}})],1)],1),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-4"},[e("el-form-item",{attrs:{label:"原價",prop:"origin_price"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.origin_price,callback:function(e){t.$set(t.productAdd,"origin_price",e)},expression:"productAdd.origin_price"}})],1)],1),e("div",{staticClass:"form-group col-md-4"},[e("el-form-item",{attrs:{label:"售價",prop:"price"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.price,callback:function(e){t.$set(t.productAdd,"price",e)},expression:"productAdd.price"}})],1)],1),e("div",{staticClass:"form-group col-md-4"},[e("el-form-item",{attrs:{label:"單位",prop:"unit"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.unit,callback:function(e){t.$set(t.productAdd,"unit",e)},expression:"productAdd.unit"}})],1)],1)]),e("div",{staticClass:"form-group"},[e("el-form-item",{attrs:{label:"輸入圖片網址",prop:"imageUrl"}},[e("el-input",{attrs:{clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("productAdd")}},model:{value:t.productAdd.imageUrl[0],callback:function(e){t.$set(t.productAdd.imageUrl,0,e)},expression:"productAdd.imageUrl[0]"}})],1)],1),e("img",{staticClass:"img-fluid",attrs:{src:t.productAdd.imageUrl[0],alt:""}}),e("hr"),e("button",{ref:"btnSubmitForm",staticClass:"btn btn-block btn-danger",attrs:{"native-type":"submit"}},[t._v(" 確定新增 ")])])],1),t.products[0]?e("pagination",{attrs:{pages:t.pagination},on:{update:t.getProducts}}):t._e()],1)},s=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"thead-dark"},[e("th",{attrs:{scope:"col",width:"5%"}},[t._v("項目")]),e("th",{attrs:{scope:"col",width:"10%"}},[t._v("分類")]),e("th",{attrs:{scope:"col",width:"20%"}},[t._v("產品名稱")]),e("th",{attrs:{scope:"col",width:"20%"}},[t._v("產品圖")]),e("th",{staticClass:"sort text-center",attrs:{scope:"col",width:"10%"}},[t._v("原價")]),e("th",{staticClass:"sort text-center",attrs:{scope:"col",width:"10%"}},[t._v("售價")]),e("th",{staticClass:"text-center",attrs:{scope:"col",width:"15%"}},[t._v("是否啟用")]),e("th",{staticClass:"text-center",attrs:{scope:"col",width:"10%"}},[t._v("編輯")])])])}],a=r(7883),i=r(6265),c=r.n(i),n={name:"MyProducts",data(){return{products:[],productTemp:{imageUrl:[]},pagination:{},modal:!1,text:"",msg:"",productAdd:{title:"",category:"",content:"",description:"",imageUrl:[],enabled:!0,origin_price:"",price:"",unit:""},rules:{title:[{required:!0,message:"標題為必填",trigger:"blur"}],category:[{required:!0,message:"分類為必填",trigger:"blur"}],content:[{required:!0,message:"敘述為必填",trigger:"blur"}],description:[{required:!0,message:"說明為必填",trigger:"blur"}],imageUrl:[{required:!0,message:"圖片網址為必填",trigger:"blur"}]}}},components:{pagination:a.Z},created(){this.getProducts()},methods:{getProducts(t){this.isLoading=!0;const e=`https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/ec/products?page=${t}`;this.$http.get(e).then((t=>{this.products=t.data.data,this.pagination=t.data.meta.pagination}))},getProductTemp(t){this.productTemp={...t}},handleSubmit(){c().patch(`https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/admin/ec/product/${this.productTemp.id}`,this.productTemp).then((t=>{console.log(t),this.text='<i class="fa-solid fa-circle-check" style="color: green;"></i>',this.msg="編輯成功！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3),this.getProducts()})).catch((t=>{console.log(t),this.text='<i class="fa-solid fa-triangle-exclamation" style="color: red;"></i>',this.msg="編輯失敗，請稍後再試！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3)}))},submitForm(t){this.$refs[t].validate((t=>{if(!t)return!1;{const t={...this.productAdd};c().post("https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/admin/ec/product",t).then((t=>{console.log(t),this.text='<i class="fa-solid fa-circle-check" style="color: green;"></i>',this.msg="新增成功！",this.modal=!0,this.modal=setTimeout((()=>{this.modal=!1}),1e3),this.getProducts(),this.productAdd={title:"",category:"",content:"",description:"",imageUrl:[],enabled:!0,origin_price:"",price:"",unit:""}})).catch((t=>{console.log(t.response.data)}))}}))},delProduct(t){const e=this.$createElement;this.$msgbox({title:"提示訊息",message:e("p",null,[e("span",null,"確定刪除此筆商品嗎?")]),showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消",beforeClose:(e,r,o)=>{"confirm"===e?(r.confirmButtonLoading=!0,r.confirmButtonText="執行中...",c()["delete"](`https://course-ec-api.hexschool.io/api/d25970ec-b87b-44f6-9785-9bdbbcd8dc56/admin/ec/product/${t.id}`).then((t=>{console.log(t),setTimeout((()=>{o(),setTimeout((()=>{r.confirmButtonLoading=!1}),300)}),3e3),this.$message({type:"info",message:"已刪除"}),this.getProducts()})).catch((t=>{console.log(t),o()}))):o()}})}}},l=n,d=r(1001),p=(0,d.Z)(l,o,s,!1,null,null,null),u=p.exports}}]);
//# sourceMappingURL=887.bf263bf6.js.map